{% assign section = include.section | default: "/everyday/" %}

<style>
  .sq-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;margin:1.5rem 0}
  .sq-card{display:block;border:1px solid rgba(0,0,0,.12);border-radius:12px;overflow:hidden;text-decoration:none}
  .sq-thumb{aspect-ratio:4/3;width:100%;object-fit:cover;display:block;background:rgba(0,0,0,.04)}
  .sq-body{padding:12px}
  .sq-title{margin:0 0 .25rem 0;font-size:1.05rem;line-height:1.2}
  .sq-desc{margin:0;color:rgba(0,0,0,.7);font-size:.95rem}
</style>

<div class="sq-grid">
  {% assign items = site.pages | where_exp: "p", "p.url contains section" %}
  {% assign items = items | where_exp: "p", "p.url != section" %}
  {% assign items = items | sort: "title" %}

  {% for p in items %}
    <a class="sq-card" href="{{ p.url | relative_url }}">
      {% if p.image %}
        <img class="sq-thumb" src="{{ p.image | relative_url }}" alt="{{ p.title | escape }}">
      {% else %}
        <div class="sq-thumb"></div>
      {% endif %}
      <div class="sq-body">
        <h3 class="sq-title">{{ p.title }}</h3>
        {% if p.description %}
          <p class="sq-desc">{{ p.description }}</p>
        {% endif %}
      </div>
    </a>
  {% endfor %}
</div>
